<html>
<head>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link rel='stylesheet' href='//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css'>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mathjs/3.2.0/math.min.js"></script>
    <script src="/static/jsoneditor.js"></script>

    <script>
        JSONEditor.defaults.theme = "bootstrap3";
        JSONEditor.defaults.iconlib = "fontawesome4";
    </script>
    <script>
        function post(path, params, method) {
            method = method || "post"; // Set method to post by default if not specified.

            // The rest of this code assumes you are not using a library.
            // It can be made less wordy if you use one.
            var form = document.createElement("form");
            form.setAttribute("method", method);
            form.setAttribute("action", path);

            for (var key in params) {
                if (params.hasOwnProperty(key)) {
                    var hiddenField = document.createElement("input");
                    hiddenField.setAttribute("type", "hidden");
                    hiddenField.setAttribute("name", key);
                    hiddenField.setAttribute("value", params[key]);

                    form.appendChild(hiddenField);
                }
            }

            document.body.appendChild(form);
            form.submit();
        }
    </script>
</head>
<body>
<h1>Upload</h1>
<div id='editor_holder'></div>
<button id="submit">Submit</button>
<script>
    var editor = new JSONEditor(document.getElementById('editor_holder'), {
        ajax: true,
        schema: {
            $ref: "/static/schema.json",
            format: "grid"
        }
    });
    document.getElementById('submit').addEventListener('click', function () {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("POST", "/submit");
        xmlhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xmlhttp.send(JSON.stringify(editor.getValue()));
    });
</script>
</body>
</html>
